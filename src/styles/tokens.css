/**
 * Fractal Design Tokens
 * =====================
 * 
 * This file defines the core design tokens using CSS custom properties.
 * All values use the OKLCH color space for perceptual uniformity.
 * 
 * OKLCH Format: oklch(Lightness Chroma Hue)
 * - Lightness: 0% (black) to 100% (white)
 * - Chroma: 0 (gray) to ~0.4 (maximum saturation)
 * - Hue: 0-360 degrees on the color wheel
 * 
 * Design Principles:
 * 1. Zero chromatic colors in core UI (chroma = 0)
 * 2. Single accent for errors (red hue)
 * 3. Chart colors reserved for data visualization only
 * 
 * Theme Switching:
 * - Light mode is the default (defined in :root)
 * - Dark mode activates via [data-theme="dark"] attribute
 * - System preference detection via @media (prefers-color-scheme)
 */

:root {
  /* ============================================
   * LIGHT MODE (Default)
   * Clean, bright interface with dark text
   * ============================================ */
  
  /* Backgrounds - Pure to subtle grays */
  --bg-primary: oklch(100% 0 0);      /* #ffffff - Main background */
  --bg-secondary: oklch(97% 0 0);     /* ~#f7f7f7 - Subtle background */
  --bg-tertiary: oklch(94% 0 0);      /* ~#efefef - Emphasized areas */
  
  /* Text - Near-black to gray */
  --text-primary: oklch(15% 0 0);     /* ~#1a1a1a - Main text */
  --text-secondary: oklch(40% 0 0);   /* ~#5c5c5c - Secondary text */
  --text-tertiary: oklch(55% 0 0);    /* ~#7a7a7a - Tertiary/muted text */
  
  /* Borders - Light to medium grays */
  --border-primary: oklch(85% 0 0);   /* ~#d4d4d4 - Default borders */
  --border-strong: oklch(70% 0 0);    /* ~#a3a3a3 - Emphasized borders */
  --border-focus: oklch(15% 0 0);     /* Same as text-primary - Focus rings */
  
  /* ============================================
   * ACCENT COLOR (Error/Destructive Only)
   * Vivid red - the ONLY chromatic color in UI
   * ============================================ */
  --accent-error: oklch(55% 0.25 25);      /* Vivid red for errors */
  --accent-error-bg: oklch(95% 0.05 25);   /* Light red background */
  
  /* ============================================
   * CHART COLORS (Data Visualization Only)
   * These colors are NEVER used in the core UI
   * ============================================ */
  --chart-1: oklch(65% 0.2 250);      /* Blue - Primary data */
  --chart-2: oklch(70% 0.2 150);      /* Green - Secondary data */
  --chart-3: oklch(75% 0.2 85);       /* Yellow - Tertiary data */
  --chart-4: oklch(65% 0.2 310);      /* Purple - Quaternary data */
  --chart-5: oklch(70% 0.2 50);       /* Orange - Quinary data */
  
  /* ============================================
   * CONCEPT HIGHLIGHT COLORS
   * Subtle, monochrome-adjacent colors for 
   * semantic concept highlighting. Low chroma
   * to maintain professional aesthetic.
   * ============================================ */
  --concept-science: oklch(92% 0.04 250);       /* Muted blue tint */
  --concept-science-text: oklch(35% 0.08 250);  /* Darker blue for text */
  --concept-philosophy: oklch(92% 0.04 310);    /* Muted purple tint */
  --concept-philosophy-text: oklch(35% 0.08 310);
  --concept-psychology: oklch(92% 0.04 150);    /* Muted green tint */
  --concept-psychology-text: oklch(35% 0.08 150);
  --concept-technology: oklch(92% 0.04 50);     /* Muted orange tint */
  --concept-technology-text: oklch(35% 0.08 50);
  --concept-abstract: oklch(93% 0.02 0);        /* Near-gray, minimal tint */
  --concept-abstract-text: oklch(40% 0 0);
  
  /* Highlight background colors for light mode */
  --highlight-science: oklch(85% 0.08 250);       /* Blue highlight */
  --highlight-science-hover: oklch(78% 0.12 250);
  --highlight-philosophy: oklch(85% 0.08 310);    /* Purple highlight */
  --highlight-philosophy-hover: oklch(78% 0.12 310);
  --highlight-psychology: oklch(85% 0.08 150);    /* Green highlight */
  --highlight-psychology-hover: oklch(78% 0.12 150);
  --highlight-technology: oklch(85% 0.08 50);     /* Orange highlight */
  --highlight-technology-hover: oklch(78% 0.12 50);
  --highlight-abstract: oklch(88% 0.04 0);        /* Gray highlight */
  --highlight-abstract-hover: oklch(82% 0.06 0);
  
  /* ============================================
   * TYPOGRAPHY
   * Monospace-first with sans-serif fallback
   * ============================================ */
  
  /* Font Families */
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', 'IBM Plex Mono', 'SF Mono', monospace;
  
  /* Font Sizes - Based on 1rem = 16px */
  --text-xs: 0.75rem;     /* 12px - Captions, labels */
  --text-sm: 0.875rem;    /* 14px - Small text, hints */
  --text-base: 1rem;      /* 16px - Body text */
  --text-lg: 1.125rem;    /* 18px - Large body */
  --text-xl: 1.25rem;     /* 20px - Small headings */
  --text-2xl: 1.5rem;     /* 24px - Headings */
  --text-3xl: 2rem;       /* 32px - Large headings */
  --text-4xl: 2.5rem;     /* 40px - Display text */
  
  /* Line Heights */
  --leading-tight: 1.2;    /* Headings */
  --leading-normal: 1.5;   /* Body text */
  --leading-relaxed: 1.75; /* Loose text */
  
  /* Letter Spacing */
  --tracking-tight: -0.02em;   /* Condensed - headings */
  --tracking-normal: 0;        /* Default */
  --tracking-wide: 0.02em;     /* Expanded - labels */
  
  /* ============================================
   * SPACING SCALE
   * Based on 4px (0.25rem) increments
   * ============================================ */
  --space-1: 0.25rem;    /* 4px */
  --space-2: 0.5rem;     /* 8px */
  --space-3: 0.75rem;    /* 12px */
  --space-4: 1rem;       /* 16px */
  --space-5: 1.25rem;    /* 20px */
  --space-6: 1.5rem;     /* 24px */
  --space-8: 2rem;       /* 32px */
  --space-10: 2.5rem;    /* 40px */
  --space-12: 3rem;      /* 48px */
  --space-16: 4rem;      /* 64px */
  --space-20: 5rem;      /* 80px */
  --space-24: 6rem;      /* 96px */
  
  /* ============================================
   * NEOBRUTALIST DESIGN TOKENS
   * Hard edges, bold borders, no frills
   * ============================================ */
  --border-width: 2px;          /* Standard border */
  --border-width-strong: 3px;   /* Emphasized border */
  --border-radius: 0;           /* Zero radius - hard edges */
  
  /* ============================================
   * TRANSITIONS
   * Fast, functional animations
   * ============================================ */
  --transition-fast: 100ms ease-out;
  --transition-normal: 200ms ease-out;
  --transition-slow: 300ms ease-out;
  
  /* ============================================
   * STASH FEATURE TOKENS
   * Sidebar dimensions and type-specific colors
   * ============================================ */
  --stash-width-expanded: 320px;
  --stash-width-collapsed: 48px;
  --stash-bg: var(--bg-secondary);
  --stash-border: var(--border-primary);
  
  /* Stash item type indicators - map to concept colors */
  --stash-highlight: var(--concept-science);
  --stash-explanation: var(--concept-philosophy);
  --stash-question: var(--concept-technology);
  --stash-chat: var(--concept-psychology);
  --stash-note: var(--concept-abstract);
  
  /* ============================================
   * PROBE FEATURE TOKENS
   * Right sidebar for synthesis conversations
   * ============================================ */
  --probe-width-expanded: 400px;
  --probe-width-collapsed: 48px;
  --probe-bg: var(--bg-secondary);
  --probe-border: var(--border-primary);
  
  /* Probe color tokens - map to chart colors */
  --probe-blue: var(--chart-1);
  --probe-green: var(--chart-2);
  --probe-yellow: var(--chart-3);
  --probe-purple: var(--chart-4);
  --probe-orange: var(--chart-5);
  
  /* ============================================
   * GRAPH VIEW TOKENS
   * 3D knowledge graph visualization
   * ============================================ */
  --graph-bg: var(--bg-primary);
  --graph-node-question: oklch(65% 0.15 250);     /* Blue sphere */
  --graph-node-concept: oklch(65% 0.12 310);      /* Purple icosahedron */
  --graph-node-stash: oklch(65% 0.15 145);        /* Green cube */
  --graph-node-probe: oklch(65% 0.15 45);         /* Orange torus */
  --graph-edge-default: oklch(50% 0 0);           /* Gray edges */
  --graph-edge-strong: oklch(65% 0.1 250);        /* Highlighted edges */
}

/* ============================================
 * DARK MODE
 * Applied via data-theme="dark" attribute
 * ============================================ */
[data-theme="dark"] {
  /* Backgrounds - Near-black to dark grays */
  --bg-primary: oklch(12% 0 0);       /* ~#1a1a1a - Main background */
  --bg-secondary: oklch(18% 0 0);     /* ~#2a2a2a - Subtle background */
  --bg-tertiary: oklch(22% 0 0);      /* ~#333333 - Emphasized areas */
  
  /* Text - Off-white to gray */
  --text-primary: oklch(92% 0 0);     /* ~#e8e8e8 - Main text */
  --text-secondary: oklch(65% 0 0);   /* ~#999999 - Secondary text */
  --text-tertiary: oklch(50% 0 0);    /* ~#737373 - Tertiary/muted text */
  
  /* Borders - Dark grays */
  --border-primary: oklch(25% 0 0);   /* ~#3d3d3d - Default borders */
  --border-strong: oklch(35% 0 0);    /* ~#525252 - Emphasized borders */
  --border-focus: oklch(92% 0 0);     /* Same as text-primary - Focus rings */
  
  /* Adjusted accent background for dark mode */
  --accent-error-bg: oklch(20% 0.1 25);
  
  /* Concept highlight colors - darker backgrounds for dark mode */
  --concept-science: oklch(22% 0.06 250);
  --concept-science-text: oklch(75% 0.08 250);
  --concept-philosophy: oklch(22% 0.06 310);
  --concept-philosophy-text: oklch(75% 0.08 310);
  --concept-psychology: oklch(22% 0.06 150);
  --concept-psychology-text: oklch(75% 0.08 150);
  --concept-technology: oklch(22% 0.06 50);
  --concept-technology-text: oklch(75% 0.08 50);
  --concept-abstract: oklch(20% 0.02 0);
  --concept-abstract-text: oklch(70% 0 0);
  
  /* Highlight background colors for dark mode - brighter, more visible */
  --highlight-science: oklch(42% 0.18 250);       /* Blue highlight */
  --highlight-science-hover: oklch(50% 0.22 250);
  --highlight-philosophy: oklch(42% 0.18 310);    /* Purple highlight */
  --highlight-philosophy-hover: oklch(50% 0.22 310);
  --highlight-psychology: oklch(42% 0.18 150);    /* Green highlight */
  --highlight-psychology-hover: oklch(50% 0.22 150);
  --highlight-technology: oklch(42% 0.18 50);     /* Orange highlight */
  --highlight-technology-hover: oklch(50% 0.22 50);
  --highlight-abstract: oklch(38% 0.08 0);        /* Gray highlight */
  --highlight-abstract-hover: oklch(45% 0.10 0);
  
  /* Graph view tokens for dark mode */
  --graph-bg: var(--bg-primary);
  --graph-node-question: oklch(70% 0.18 250);     /* Brighter blue */
  --graph-node-concept: oklch(70% 0.15 310);      /* Brighter purple */
  --graph-node-stash: oklch(70% 0.18 145);        /* Brighter green */
  --graph-node-probe: oklch(70% 0.18 45);         /* Brighter orange */
  --graph-edge-default: oklch(45% 0 0);           /* Slightly lighter gray */
  --graph-edge-strong: oklch(70% 0.12 250);       /* Highlighted edges */
}

/* ============================================
 * SYSTEM PREFERENCE DETECTION
 * Applies dark mode when no explicit preference set
 * and system prefers dark
 * ============================================ */
@media (prefers-color-scheme: dark) {
  /* Only apply if no data-theme attribute is set */
  :root:not([data-theme="light"]) {
    --bg-primary: oklch(12% 0 0);
    --bg-secondary: oklch(18% 0 0);
    --bg-tertiary: oklch(22% 0 0);
    
    --text-primary: oklch(92% 0 0);
    --text-secondary: oklch(65% 0 0);
    --text-tertiary: oklch(50% 0 0);
    
    --border-primary: oklch(25% 0 0);
    --border-strong: oklch(35% 0 0);
    --border-focus: oklch(92% 0 0);
    
    --accent-error-bg: oklch(20% 0.1 25);
    
    /* Concept highlight colors - darker backgrounds for dark mode */
    --concept-science: oklch(22% 0.06 250);
    --concept-science-text: oklch(75% 0.08 250);
    --concept-philosophy: oklch(22% 0.06 310);
    --concept-philosophy-text: oklch(75% 0.08 310);
    --concept-psychology: oklch(22% 0.06 150);
    --concept-psychology-text: oklch(75% 0.08 150);
    --concept-technology: oklch(22% 0.06 50);
    --concept-technology-text: oklch(75% 0.08 50);
    --concept-abstract: oklch(20% 0.02 0);
    --concept-abstract-text: oklch(70% 0 0);
    
    /* Highlight background colors for dark mode - brighter, more visible */
    --highlight-science: oklch(42% 0.18 250);
    --highlight-science-hover: oklch(50% 0.22 250);
    --highlight-philosophy: oklch(42% 0.18 310);
    --highlight-philosophy-hover: oklch(50% 0.22 310);
    --highlight-psychology: oklch(42% 0.18 150);
    --highlight-psychology-hover: oklch(50% 0.22 150);
    --highlight-technology: oklch(42% 0.18 50);
    --highlight-technology-hover: oklch(50% 0.22 50);
    --highlight-abstract: oklch(38% 0.08 0);
    --highlight-abstract-hover: oklch(45% 0.10 0);
    
    /* Graph view tokens for dark mode */
    --graph-bg: var(--bg-primary);
    --graph-node-question: oklch(70% 0.18 250);
    --graph-node-concept: oklch(70% 0.15 310);
    --graph-node-stash: oklch(70% 0.18 145);
    --graph-node-probe: oklch(70% 0.18 45);
    --graph-edge-default: oklch(45% 0 0);
    --graph-edge-strong: oklch(70% 0.12 250);
  }
}

/* ============================================
 * MOBILE RESPONSIVENESS
 * ============================================ */
@media (max-width: 768px) {
  :root {
    /* Sidebars become full width overlays */
    --stash-width-expanded: 100vw;
    --probe-width-expanded: 100vw;
  }
}
